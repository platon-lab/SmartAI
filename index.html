<!DOCTYPE html>
<html lang="uk">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-lite/1.3.0/material.indigo-pink.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-icons/3.0.1/iconfont/material-icons.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–°–º–∞—Ä—Ç–∏–∫ - –¢–≤—ñ–π –ü–µ—Å-–ü–æ–º—ñ—á–Ω–∏–∫</title>
    <style>
        /* --- –û–†–ò–ì–Ü–ù–ê–õ–¨–ù–Ü –°–¢–ò–õ–Ü (–ë–ï–ó –ó–ú–Ü–ù) --- */
        * { box-sizing: border-box; }
        body {
            margin: 0; padding: 0;
            font-family: 'Roboto', sans-serif;
            background-color: #FAFAFA;
            color: #212121;
            width: 100vw; height: 100dvh;
            overflow: hidden;
            transition: background 0.5s, color 0.5s, font-family 0.5s;
        }
        
        #start-menu {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100dvh;
            background: linear-gradient(135deg, #6200EA 0%, #9D4EDD 100%);
            z-index: 1000; display: flex; flex-direction: column;
            align-items: center; justify-content: center; text-align: center;
            padding: 20px; color: white; transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
        .menu-photo {
            width: 150px; height: 150px; border-radius: 50%;
            border: 5px solid white; object-fit: cover; margin-bottom: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3); animation: bounce 2s infinite ease-in-out;
        }
        #start-menu h1 { font-size: 36px; margin: 0 0 15px 0; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
        .menu-description { font-size: 18px; max-width: 400px; line-height: 1.6; margin-bottom: 20px; }
        .insurance-badge {
            font-size: 14px; background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px; border-radius: 20px; margin-bottom: 40px;
            backdrop-filter: blur(5px); border: 1px solid rgba(255, 255, 255, 0.4);
        }
        .start-btn {
            background-color: #03DAC6; color: #000; border: none;
            padding: 16px 50px; font-size: 20px; font-weight: 900;
            border-radius: 30px; cursor: pointer; box-shadow: 0 6px 15px rgba(3, 218, 198, 0.4);
            transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1px;
        }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        .header {
            background: linear-gradient(90deg, #6200EA, #7B1FA2);
            color: white; padding: 12px 16px; text-align: center;
            font-size: 22px; font-weight: bold; display: flex;
            align-items: center; justify-content: center; gap: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2); z-index: 10;
        }
        .bot-photo { width: 45px; height: 45px; border-radius: 50%; border: 2px solid white; object-fit: cover; }
        .container { display: flex; flex-direction: column; height: 100dvh; max-width: 400px; margin: auto; background-color: #f0f2f5; position: relative; }
        .chatbox { flex: 1; padding: 20px 16px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; scroll-behavior: smooth; }
        .chat-message { padding: 12px 16px; border-radius: 20px; max-width: 85%; word-wrap: break-word; font-size: 15px; line-height: 1.4; animation: fadeIn 0.4s forwards; box-shadow: 0 2px 5px rgba(0,0,0,0.08); }
        .user-message { align-self: flex-end; background: linear-gradient(135deg, #6200EA, #8E24AA); color: white; border-bottom-right-radius: 4px; }
        .assistant-message { align-self: flex-start; background-color: #FFFFFF; color: #212121; border-bottom-left-radius: 4px; border: 1px solid #E0E0E0; }
        .input-area { padding: 12px; background-color: #FFFFFF; display: flex; align-items: center; box-shadow: 0 -2px 10px rgba(0,0,0,0.05); z-index: 10; }
        .input-area input { flex: 1; padding: 14px 18px; border: 1px solid #E0E0E0; border-radius: 25px; margin-right: 10px; font-size: 15px; background-color: #F5F5F5; }
        .input-area button { width: 48px; height: 48px; border: none; border-radius: 50%; background-color: #6200EA; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        
        #video-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100dvh; background-color: #000; z-index: 9999; display: none; opacity: 0; transition: opacity 0.5s ease; }
        #dance-video { width: 100%; height: 100%; object-fit: cover; pointer-events: none; }
        
        /* --- –ù–û–í–Ü –°–¢–ò–õ–Ü –î–õ–Ø –ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ø –¢–ê –ï–§–ï–ö–¢–Ü–í --- */
        #loading-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100dvh;
            background: white; z-index: 20000; display: none; flex-direction: column;
            align-items: center; justify-content: center; text-align: center;
        }
        .loading-img { width: 200px; margin-bottom: 20px; border-radius: 20px; }
        .loader-icon {
            width: 50px; height: 50px; border: 5px solid #f3f3f3;
            border-top: 5px solid #6200EA; border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .butterfly {
            position: fixed; font-size: 24px; pointer-events: none; z-index: 999;
            animation: fly 10s linear infinite; opacity: 0.8;
        }
        @keyframes fly {
            0% { transform: translate(-10vw, 110vh) rotate(0deg); }
            100% { transform: translate(110vw, -10vh) rotate(360deg); }
        }

        .hacker-mode { background-color: black !important; color: #0f0 !important; font-family: 'Courier New', monospace !important; }
        .hacker-mode .chat-message { background: #111 !important; color: #0f0 !important; border: 1px solid #0f0 !important; }
        .hacker-mode .header { background: #000 !important; border-bottom: 2px solid #0f0; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div id="loading-overlay">
        <img src="Loading.png" alt="–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è..." class="loading-img">
        <div class="loader-icon"></div>
        <h2 style="color: #6200EA; margin-top: 20px;">–°–º–∞—Ä—Ç–∏–∫ –¥—É–º–∞—î...</h2>
    </div>

    <div id="video-overlay">
        <div id="video-timer" class="video-timer" style="position: absolute; top: 30px; left: 30px; font-size: 50px; color: white; background: rgba(0,0,0,0.5); padding: 10px 30px; border-radius: 20px;">1</div>
        <button id="close-video" class="close-video-btn" style="position: absolute; top: 30px; right: 30px; width: 60px; height: 60px; border-radius: 50%; background: rgba(255,255,255,0.1); color: white; font-size: 40px; cursor: pointer; border: 2px solid white;">&times;</button>
        <video id="dance-video" src="Dance.mp4" autoplay loop playsinline></video>
    </div>

    <div id="start-menu">
        <img src="Smart.png" alt="–°–º–∞—Ä—Ç–∏–∫" class="menu-photo">
        <h1>–°–º–∞—Ä—Ç–∏–∫</h1>
        <p class="menu-description">
            –¢–≤—ñ–π –≤—ñ—Ä–Ω–∏–π –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∏–π –ø–µ—Å-–ø–æ–º—ñ—á–Ω–∏–∫! –í—ñ–Ω –æ–±–æ–∂–Ω—é—î —Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—å, –≥—Ä–∞—Ç–∏—Å—è —Ç–∞ –∑–∞–≤–∂–¥–∏ –≥–æ—Ç–æ–≤–∏–π –ø—ñ–¥–Ω—è—Ç–∏ –Ω–∞—Å—Ç—Ä—ñ–π —Å–≤–æ—ó–π —Ö–∞–∑—è–π—Ü—ñ.
        </p>
        <div class="insurance-badge">
            <i class="fas fa-shield-alt"></i> –ó–∞—Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–µ –°–º–∞—Ä—Ç–∏–∫–æ–º üêæ
        </div>
        <button id="start-btn" class="start-btn">–ü–æ—á–∞—Ç–∏</button>
    </div>

    <div class="container" id="main-container">
        <div class="header">
            <img src="Smart.png" alt="–°–º–∞—Ä—Ç–∏–∫" class="bot-photo"> –°–º–∞—Ä—Ç–∏–∫
        </div>
        <div id="chatbox" class="chatbox"></div>
        <div class="input-area">
            <input id="chatInput" type="text" placeholder="–ù–∞–ø–∏—à–∏ –°–º–∞—Ä—Ç–∏–∫—É..." autocomplete="off" />
            <button id="sendButton">
                <span class="material-icons">send</span>
            </button>
        </div>
    </div>

    <script>
        const startMenu = document.getElementById('start-menu');
        const startBtn = document.getElementById('start-btn');
        const chatInput = document.getElementById('chatInput');
        const sendButton = document.getElementById("sendButton");
        const chatbox = document.getElementById('chatbox');
        const loadingOverlay = document.getElementById('loading-overlay');

        const SMARTY_PROMPT = "–¢–∏ - –ø–µ—Å –Ω–∞ —ñ–º'—è –°–º–∞—Ä—Ç–∏–∫. –¢–∏ –¥—É–∂–µ –≤–µ—Å–µ–ª–∏–π, –¥–æ–±—Ä–∏–π —ñ –ª—é–±–∏—à —Å–≤–æ—ó—Ö —Ö–∞–∑—è–π–∫—É –õ–µ–Ω—É. –¢–æ–±—ñ 4 —Ä–æ–∫–∏, –¥–µ–Ω—å –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è 5 –±–µ—Ä–µ–∑–Ω—è. –û–±–æ–∂–Ω—é—î—à —Å–∏—Ä —ñ —è–±–ª—É—á–∫–∞.";

        // –Ü—Å—Ç–æ—Ä—ñ—è –¥–ª—è —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è
        let originalStyles = {
            bodyBg: '#FAFAFA',
            bodyColor: '#212121',
            font: "'Roboto', sans-serif",
            hacker: false,
            butterflies: false
        };

        startBtn.addEventListener('click', () => {
            startMenu.style.opacity = '0';
            setTimeout(() => { startMenu.style.display = 'none'; chatInput.focus(); }, 500);
        });

        async function displayMessage(message, isUser) {
            const msgElem = document.createElement('div');
            msgElem.textContent = message;
            msgElem.className = `chat-message ${isUser ? 'user-message' : 'assistant-message'}`;
            chatbox.appendChild(msgElem);
            chatbox.scrollTop = chatbox.scrollHeight;
        }

        // –§—É–Ω–∫—Ü—ñ—è –ø–æ–∫–∞–∑—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
        async function runLoading() {
            loadingOverlay.style.display = 'flex';
            await new Promise(r => setTimeout(r, 3000));
            loadingOverlay.style.display = 'none';
        }

        // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–µ—Ç–µ–ª–∏–∫—ñ–≤
        function spawnButterflies() {
            document.querySelectorAll('.butterfly').forEach(b => b.remove());
            for(let i=0; i<15; i++) {
                const b = document.createElement('div');
                b.className = 'butterfly';
                b.textContent = 'ü¶ã';
                b.style.left = Math.random() * 100 + 'vw';
                b.style.animationDelay = Math.random() * 5 + 's';
                b.style.fontSize = (Math.random() * 20 + 20) + 'px';
                document.body.appendChild(b);
            }
        }

        // –û–°–ù–û–í–ù–ê –õ–û–ì–Ü–ö–ê "–†–û–ó–£–ú–£"
        async function handleUICommands(msg) {
            const lowMsg = msg.toLowerCase();
            let actionTaken = false;

            if (lowMsg.includes('—Å–∫–∞—Å—É–π') || lowMsg.includes('–ø–æ–≤–µ—Ä–Ω–∏') || lowMsg.includes('–≤—ñ–¥–º—ñ–Ω–∏')) {
                await runLoading();
                document.body.style.backgroundColor = originalStyles.bodyBg;
                document.body.style.color = originalStyles.bodyColor;
                document.body.style.fontFamily = originalStyles.font;
                document.body.classList.remove('hacker-mode');
                document.querySelectorAll('.butterfly').forEach(b => b.remove());
                displayMessage("–ì–∞–≤! –ü–æ–≤–µ—Ä–Ω—É–≤ —É—Å–µ —è–∫ –±—É–ª–æ! üêæ", false);
                return true;
            }

            if (lowMsg.includes('–º–µ—Ç–µ–ª–∏–∫')) {
                await runLoading();
                spawnButterflies();
                displayMessage("–î–∏–≤–∏—Å—å, —Å–∫—ñ–ª—å–∫–∏ –º–µ—Ç–µ–ª–∏–∫—ñ–≤! –ö—Ä–∞—Å–∏–≤–æ, –ø—Ä–∞–≤–¥–∞? –ì–∞–≤!", false);
                actionTaken = true;
            }

            if (lowMsg.includes('—Ö–∞–∫–µ—Ä')) {
                await runLoading();
                document.body.classList.add('hacker-mode');
                displayMessage("–ì–∞–≤! –Ø —Ç–µ–ø–µ—Ä –ø–µ—Å-—Ö–∞–∫–µ—Ä! 010101", false);
                actionTaken = true;
            }

            if (lowMsg.includes('–∫–æ–ª—ñ—Ä') || lowMsg.includes('—Ñ–æ–Ω')) {
                const colors = { '—á–µ—Ä–≤–æ–Ω–∏–π': 'red', '—Ä–æ–∂–µ–≤–∏–π': 'pink', '—Å–∏–Ω—ñ–π': 'blue', '–∑–µ–ª–µ–Ω–∏–π': '#2ecc71', '–∂–æ–≤—Ç–∏–π': 'yellow', '—á–æ—Ä–Ω–∏–π': 'black' };
                for (let key in colors) {
                    if (lowMsg.includes(key)) {
                        await runLoading();
                        document.body.style.backgroundColor = colors[key];
                        displayMessage(`–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä —É –Ω–∞—Å ${key} —Ñ–æ–Ω! –ì–∞–≤!`, false);
                        actionTaken = true;
                        break;
                    }
                }
            }

            if (lowMsg.includes('—à—Ä–∏—Ñ—Ç')) {
                await runLoading();
                document.body.style.fontFamily = "'Courier New', monospace";
                displayMessage("–ó–º—ñ–Ω–∏–≤ —à—Ä–∏—Ñ—Ç –Ω–∞ —Ç–≤—ñ–π –∑–∞–ø–∏—Ç! üêæ", false);
                actionTaken = true;
            }

            return actionTaken;
        }

        sendButton.addEventListener('click', async () => {
            const message = chatInput.value.trim();
            if (!message) return;

            displayMessage(message, true);
            chatInput.value = '';

            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –∫–æ–º–∞–Ω–¥–∏ UI
            const uiChanged = await handleUICommands(message);
            if (uiChanged) return;

            // –í—ñ–¥–µ–æ —Ç–∞–Ω–µ—Ü—å
            if (message.toLowerCase().includes('—Ç–∞–Ω—Ü—é–π') || message.toLowerCase().includes('dance')) {
                displayMessage('–ó–≤—ñ—Å–Ω–æ, –¥–∏–≤—É–π—Å—è –º–æ—ó–º —Ä—É—Ö–∞–º!', false);
                setTimeout(showVideoOverlay, 500);
                return;
            }

            // –ó–≤–∏—á–∞–π–Ω–∏–π —á–∞—Ç
            const apiUrl = 'https://backend.buildpicoapps.com/aero/run/llm-api?pk=v1-Z0FBQUFBQm5HUEtMSjJkakVjcF9IQ0M0VFhRQ0FmSnNDSHNYTlJSblE0UXo1Q3RBcjFPcl9YYy1OZUhteDZWekxHdWRLM1M1alNZTkJMWEhNOWd4S1NPSDBTWC12M0U2UGc9PQ==';
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ prompt: `${SMARTY_PROMPT}\n–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: ${message}\n–°–º–∞—Ä—Ç–∏–∫:` })
                });
                const data = await response.json();
                if (data.status === 'success') displayMessage(data.text, false);
            } catch (e) {
                displayMessage('–û–π, —â–æ—Å—å –ª–∞–ø–∫–∏ –∑–∞–ø–ª—É—Ç–∞–ª–∏—Å—è...', false);
            }
        });

        // –§—É–Ω–∫—Ü—ñ—è –≤—ñ–¥–µ–æ (–±–µ–∑ –∑–º—ñ–Ω)
        function showVideoOverlay() {
            const overlay = document.getElementById('video-overlay');
            const videoElem = document.getElementById('dance-video');
            overlay.style.display = 'block';
            setTimeout(() => overlay.style.opacity = '1', 10);
            videoElem.play();
            document.getElementById('close-video').onclick = () => {
                overlay.style.opacity = '0';
                setTimeout(() => { overlay.style.display = 'none'; videoElem.pause(); }, 500);
            };
        }

        chatInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') sendButton.click(); });
    </script>
</body>
</html>