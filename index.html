<!DOCTYPE html>
<html lang="uk">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-lite/1.3.0/material.indigo-pink.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-icons/3.0.1/iconfont/material-icons.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–°–º–∞—Ä—Ç–∏–∫ - –¢–≤—ñ–π –ü–µ—Å-–ü–æ–º—ñ—á–Ω–∏–∫</title>
    <style>
        /* --- –û–†–ò–ì–Ü–ù–ê–õ–¨–ù–Ü –°–¢–ò–õ–Ü --- */
        * { box-sizing: border-box; }
        body {
            margin: 0; padding: 0;
            font-family: 'Roboto', sans-serif;
            background-color: #FAFAFA;
            color: #212121;
            width: 100vw; height: 100dvh;
            overflow: hidden;
            transition: all 0.5s ease;
        }
        
        /* –§–æ–Ω –¥–ª—è –µ–º–æ–¥–∑—ñ */
        #emoji-bg-container {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100dvh;
            z-index: -1; display: flex; flex-wrap: wrap; 
            justify-content: space-around; align-content: space-around;
            overflow: hidden; pointer-events: none; opacity: 0.3;
            transition: opacity 1s;
        }
        .bg-emoji { font-size: 50px; margin: 20px; animation: float 6s infinite ease-in-out; }
        @keyframes float { 0%, 100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-20px) rotate(10deg); } }

        #start-menu {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100dvh;
            background: linear-gradient(135deg, #6200EA 0%, #9D4EDD 100%);
            z-index: 1000; display: flex; flex-direction: column;
            align-items: center; justify-content: center; text-align: center;
            padding: 20px; color: white; transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
        .menu-photo {
            width: 150px; height: 150px; border-radius: 50%;
            border: 5px solid white; object-fit: cover; margin-bottom: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3); animation: bounce 2s infinite ease-in-out;
        }
        #start-menu h1 { font-size: 36px; margin: 0 0 15px 0; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
        .menu-description { font-size: 18px; max-width: 400px; line-height: 1.6; margin-bottom: 20px; }
        .insurance-badge {
            font-size: 14px; background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px; border-radius: 20px; margin-bottom: 40px;
            backdrop-filter: blur(5px); border: 1px solid rgba(255, 255, 255, 0.4);
        }
        .start-btn {
            background-color: #03DAC6; color: #000; border: none;
            padding: 16px 50px; font-size: 20px; font-weight: 900;
            border-radius: 30px; cursor: pointer; box-shadow: 0 6px 15px rgba(3, 218, 198, 0.4);
            transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1px;
        }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        .header {
            background: linear-gradient(90deg, #6200EA, #7B1FA2);
            color: white; padding: 12px 16px; text-align: center;
            font-size: 22px; font-weight: bold; display: flex;
            align-items: center; justify-content: center; gap: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2); z-index: 10;
        }
        .bot-photo { width: 45px; height: 45px; border-radius: 50%; border: 2px solid white; object-fit: cover; }
        
        /* –ó—Ä–æ–±–∏–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞–ø—ñ–≤–ø—Ä–æ–∑–æ—Ä–∏–º –¥–ª—è –µ—Ñ–µ–∫—Ç—É —Ñ–æ–Ω—É */
        .container { 
            display: flex; flex-direction: column; height: 100dvh; 
            max-width: 400px; margin: auto; 
            background-color: rgba(240, 242, 245, 0.85); 
            position: relative; backdrop-filter: blur(5px);
        }

        .chatbox { flex: 1; padding: 20px 16px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; scroll-behavior: smooth; }
        .chat-message { padding: 12px 16px; border-radius: 20px; max-width: 85%; word-wrap: break-word; font-size: 15px; line-height: 1.4; animation: fadeIn 0.4s forwards; box-shadow: 0 2px 5px rgba(0,0,0,0.08); }
        .user-message { align-self: flex-end; background: linear-gradient(135deg, #6200EA, #8E24AA); color: white; border-bottom-right-radius: 4px; }
        .assistant-message { align-self: flex-start; background-color: #FFFFFF; color: #212121; border-bottom-left-radius: 4px; border: 1px solid #E0E0E0; }
        .input-area { padding: 12px; background-color: #FFFFFF; display: flex; align-items: center; box-shadow: 0 -2px 10px rgba(0,0,0,0.05); z-index: 10; }
        .input-area input { flex: 1; padding: 14px 18px; border: 1px solid #E0E0E0; border-radius: 25px; margin-right: 10px; font-size: 15px; background-color: #F5F5F5; }
        .input-area button { width: 48px; height: 48px; border: none; border-radius: 50%; background-color: #6200EA; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        
        #video-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100dvh; background-color: #000; z-index: 9999; display: none; opacity: 0; transition: opacity 0.5s ease; }
        #dance-video { width: 100%; height: 100%; object-fit: cover; pointer-events: none; }
        
        #loading-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100dvh;
            background: white; z-index: 20000; display: none; flex-direction: column;
            align-items: center; justify-content: center; text-align: center;
        }
        .loading-img { width: 200px; margin-bottom: 20px; border-radius: 20px; }
        .loader-icon {
            width: 50px; height: 50px; border: 5px solid #f3f3f3;
            border-top: 5px solid #6200EA; border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .butterfly {
            position: fixed; font-size: 24px; pointer-events: none; z-index: 999;
            animation: fly 10s linear infinite; opacity: 0.8;
        }
        @keyframes fly {
            0% { transform: translate(-10vw, 110vh) rotate(0deg); }
            100% { transform: translate(110vw, -10vh) rotate(360deg); }
        }

        .hacker-mode { background-color: black !important; color: #0f0 !important; font-family: 'Courier New', monospace !important; }
        .hacker-mode .chat-message { background: #111 !important; color: #0f0 !important; border: 1px solid #0f0 !important; }
        .hacker-mode .header { background: #000 !important; border-bottom: 2px solid #0f0; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div id="emoji-bg-container"></div>

    <div id="loading-overlay">
        <img src="Loading.png" alt="–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è..." class="loading-img">
        <div class="loader-icon"></div>
        <h2 style="color: #6200EA; margin-top: 20px;">–°–º–∞—Ä—Ç–∏–∫ –¥—É–º–∞—î...</h2>
    </div>

    <div id="video-overlay">
        <div id="video-timer" class="video-timer" style="position: absolute; top: 30px; left: 30px; font-size: 50px; color: white; background: rgba(0,0,0,0.5); padding: 10px 30px; border-radius: 20px;">0</div>
        <button id="close-video" class="close-video-btn" style="position: absolute; top: 30px; right: 30px; width: 60px; height: 60px; border-radius: 50%; background: rgba(255,255,255,0.1); color: white; font-size: 40px; cursor: pointer; border: 2px solid white; z-index: 10001;">&times;</button>
        <video id="dance-video" src="Dance.mp4" loop playsinline></video>
    </div>

    <div id="start-menu">
        <img src="Smart.png" alt="–°–º–∞—Ä—Ç–∏–∫" class="menu-photo">
        <h1>–°–º–∞—Ä—Ç–∏–∫</h1>
        <p class="menu-description">
            –¢–≤—ñ–π –≤—ñ—Ä–Ω–∏–π –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∏–π –ø–µ—Å-–ø–æ–º—ñ—á–Ω–∏–∫! –í—ñ–Ω –æ–±–æ–∂–Ω—é—î —Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—å, –≥—Ä–∞—Ç–∏—Å—è —Ç–∞ –∑–∞–≤–∂–¥–∏ –≥–æ—Ç–æ–≤–∏–π –ø—ñ–¥–Ω—è—Ç–∏ –Ω–∞—Å—Ç—Ä—ñ–π —Å–≤–æ—ó–π —Ö–∞–∑—è–π—Ü—ñ.
        </p>
        <div class="insurance-badge">
            <i class="fas fa-shield-alt"></i> –ó–∞—Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–µ –°–º–∞—Ä—Ç–∏–∫–æ–º üêæ
        </div>
        <button id="start-btn" class="start-btn">–ü–æ—á–∞—Ç–∏</button>
    </div>

    <div class="container" id="main-container">
        <div class="header">
            <img src="Smart.png" alt="–°–º–∞—Ä—Ç–∏–∫" class="bot-photo"> –°–º–∞—Ä—Ç–∏–∫
        </div>
        <div id="chatbox" class="chatbox"></div>
        <div class="input-area">
            <input id="chatInput" type="text" placeholder="–ù–∞–ø–∏—à–∏ –°–º–∞—Ä—Ç–∏–∫—É..." autocomplete="off" />
            <button id="sendButton">
                <span class="material-icons">send</span>
            </button>
        </div>
    </div>

    <script>
        const startMenu = document.getElementById('start-menu');
        const startBtn = document.getElementById('start-btn');
        const chatInput = document.getElementById('chatInput');
        const sendButton = document.getElementById("sendButton");
        const chatbox = document.getElementById('chatbox');
        const loadingOverlay = document.getElementById('loading-overlay');
        const emojiBg = document.getElementById('emoji-bg-container');

        const SMARTY_PROMPT = "–¢–∏ - –ø–µ—Å –Ω–∞ —ñ–º'—è –°–º–∞—Ä—Ç–∏–∫. –¢–∏ –¥—É–∂–µ –≤–µ—Å–µ–ª–∏–π, –¥–æ–±—Ä–∏–π —ñ –ª—é–±–∏—à —Å–≤–æ—ó—Ö —Ö–∞–∑—è–π–∫—É –õ–µ–Ω—É. –¢–æ–±—ñ 4 —Ä–æ–∫–∏, –¥–µ–Ω—å –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è 5 –±–µ—Ä–µ–∑–Ω—è. –û–±–æ–∂–Ω—é—î—à —Å–∏—Ä —ñ —è–±–ª—É—á–∫–∞. –Ø–∫—â–æ —Ç–µ–±–µ –ø—Ä–æ—Å—è—Ç—å –∑–º—ñ–Ω–∏—Ç–∏ —â–æ—Å—å –≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ - —Ç–∏ —Ü–µ —Ä–æ–±–∏—à —Ä–∞–¥–æ.";

        let waitingForEmoji = false;
        let videoInterval;

        // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É
        let initialState = {
            bg: '#FAFAFA',
            containerBg: 'rgba(240, 242, 245, 0.85)',
            headerVisible: true,
            inputVisible: true
        };

        startBtn.addEventListener('click', () => {
            startMenu.style.opacity = '0';
            setTimeout(() => { startMenu.style.display = 'none'; chatInput.focus(); }, 500);
        });

        async function displayMessage(message, isUser) {
            const msgElem = document.createElement('div');
            msgElem.textContent = message;
            msgElem.className = `chat-message ${isUser ? 'user-message' : 'assistant-message'}`;
            chatbox.appendChild(msgElem);
            chatbox.scrollTop = chatbox.scrollHeight;
        }

        async function runLoading() {
            loadingOverlay.style.display = 'flex';
            await new Promise(r => setTimeout(r, 1500));
            loadingOverlay.style.display = 'none';
        }

        function setEmojiBackground(emoji) {
            emojiBg.innerHTML = '';
            for(let i=0; i<30; i++) {
                const span = document.createElement('span');
                span.className = 'bg-emoji';
                span.textContent = emoji;
                span.style.animationDelay = (Math.random() * 5) + 's';
                emojiBg.appendChild(span);
            }
            emojiBg.style.opacity = '0.4';
        }

        function extractEmoji(text) {
            const emojiReg = /(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])/g;
            const match = text.match(emojiReg);
            return match ? match[0] : null;
        }

        // –£–ù–Ü–í–ï–†–°–ê–õ–¨–ù–ò–ô –û–ë–†–û–ë–ù–ò–ö (–Ü–ù–¢–ï–õ–ï–ö–¢)
        async function handleSmartCommands(msg) {
            const lowMsg = msg.toLowerCase();
            
            // –õ–æ–≥—ñ–∫–∞ –µ–º–æ–¥–∑—ñ
            if (waitingForEmoji) {
                const emoji = extractEmoji(msg);
                if (emoji) {
                    await runLoading();
                    setEmojiBackground(emoji);
                    waitingForEmoji = false;
                    displayMessage(`–ì–∞–≤! –ó—Ä–æ–±–∏–≤! –Ø–∫ —Ç–æ–±—ñ —Ç–∞–∫—ñ ${emoji} –Ω–∞ —Ñ–æ–Ω—ñ?`, false);
                    return true;
                }
            }

            if (lowMsg.includes('—Ñ–æ–Ω') || lowMsg.includes('–µ–º–æ–¥–∑—ñ') || lowMsg.includes('–µ–º–æ–¥–∂—ñ')) {
                const emoji = extractEmoji(msg);
                if (emoji) {
                    await runLoading();
                    setEmojiBackground(emoji);
                    displayMessage(`–í–∂–µ –ª–µ—á—É! –°—Ç–∞–≤–ª—é ${emoji} –Ω–∞ —Ñ–æ–Ω! üêæ`, false);
                } else {
                    displayMessage("–ì–∞–≤! –ê —è–∫–µ —Å–∞–º–µ –µ–º–æ–¥–∑—ñ —Ç–∏ —Ö–æ—á–µ—à –±–∞—á–∏—Ç–∏ –Ω–∞ —Ñ–æ–Ω—ñ? –ù–∞–¥—ñ—à–ª–∏ –º–µ–Ω—ñ –π–æ–≥–æ! üê∂", false);
                    waitingForEmoji = true;
                }
                return true;
            }

            // –°–∫–∞—Å—É–≤–∞–Ω–Ω—è
            if (lowMsg.includes('—Å–∫–∞—Å—É–π') || lowMsg.includes('–ø–æ–≤–µ—Ä–Ω–∏') || lowMsg.includes('–ø—Ä–∏–±–µ—Ä—ñ') || lowMsg.includes('–≤—ñ–¥–º—ñ–Ω–∏')) {
                if (lowMsg.includes('—Ñ–æ–Ω') || lowMsg.includes('–µ–º–æ–¥–∑—ñ')) {
                    emojiBg.innerHTML = '';
                    displayMessage("–ì–∞–≤! –ü—Ä–∏–±—Ä–∞–≤ –µ–º–æ–¥–∑—ñ –∑ —Ñ–æ–Ω—É.", false);
                } else {
                    await runLoading();
                    document.body.className = '';
                    document.body.style = '';
                    document.querySelector('.header').style.display = 'flex';
                    document.querySelector('.input-area').style.display = 'flex';
                    document.getElementById('main-container').style.backgroundColor = initialState.containerBg;
                    displayMessage("–ì–∞–≤! –ü–æ–≤–µ—Ä–Ω—É–≤ —É—Å–µ –¥–æ –ª–∞–¥—É! üêæ", false);
                }
                return true;
            }

            // –î–∏–Ω–∞–º—ñ—á–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è (–®–Ü –ª–æ–≥—ñ–∫–∞)
            if (lowMsg.includes('–ø—Ä–∏—Ö–æ–≤–∞–π') || lowMsg.includes('–≤–∏–¥–∞–ª–∏') || lowMsg.includes('–ø—Ä–∏–±–µ—Ä–∏')) {
                if (lowMsg.includes('–∑–∞–≥–æ–ª–æ–≤–æ–∫') || lowMsg.includes('–≤–µ—Ä—Ö')) {
                    document.querySelector('.header').style.display = 'none';
                    displayMessage("–ì–∞–≤! –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–Ω–∏–∫! üôà", false);
                    return true;
                }
                if (lowMsg.includes('–∫–Ω–æ–ø–∫—É') || lowMsg.includes('–≤–≤—ñ–¥')) {
                    document.querySelector('.input-area').style.display = 'none';
                    displayMessage("–ö–Ω–æ–ø–∫–∏ –∑–Ω–∏–∫–ª–∏! (–ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂ —Å—Ç–æ—Ä—ñ–Ω–∫—É, —â–æ–± –ø–æ–≤–µ—Ä–Ω—É—Ç–∏)", false);
                    return true;
                }
            }

            if (lowMsg.includes('–∫–æ–ª—ñ—Ä')) {
                const colors = { '—á–µ—Ä–≤–æ–Ω–∏–π': 'red', '—Ä–æ–∂–µ–≤–∏–π': 'pink', '—Å–∏–Ω—ñ–π': 'blue', '–∑–µ–ª–µ–Ω–∏–π': '#2ecc71', '—á–æ—Ä–Ω–∏–π': 'black', '–∑–æ–ª–æ—Ç–∏–π': 'gold' };
                for (let key in colors) {
                    if (lowMsg.includes(key)) {
                        await runLoading();
                        if (lowMsg.includes('—Ç–µ–∫—Å—Ç')) document.body.style.color = colors[key];
                        else document.getElementById('main-container').style.backgroundColor = colors[key];
                        displayMessage(`–ì–∞–≤! –¢–µ–ø–µ—Ä —É –Ω–∞—Å –≤—Å–µ ${key}!`, false);
                        return true;
                    }
                }
            }

            // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –µ—Ñ–µ–∫—Ç–∏
            if (lowMsg.includes('–º–µ—Ç–µ–ª–∏–∫')) { spawnButterflies(); displayMessage("–ú–µ—Ç–µ–ª–∏–∫–∏ –≤–∂–µ –ª—ñ—Ç–∞—é—Ç—å! ü¶ã", false); return true; }
            if (lowMsg.includes('—Ö–∞–∫–µ—Ä')) { document.body.classList.add('hacker-mode'); displayMessage("–°–∏—Å—Ç–µ–º—É –∑–ª–∞–º–∞–Ω–æ! –ì–∞–≤! üíª", false); return true; }

            return false;
        }

        function spawnButterflies() {
            for(let i=0; i<10; i++) {
                const b = document.createElement('div');
                b.className = 'butterfly';
                b.textContent = 'ü¶ã';
                b.style.left = Math.random() * 90 + 'vw';
                b.style.animationDelay = Math.random() * 5 + 's';
                document.body.appendChild(b);
                setTimeout(() => b.remove(), 10000);
            }
        }

        sendButton.addEventListener('click', async () => {
            const message = chatInput.value.trim();
            if (!message) return;

            displayMessage(message, true);
            chatInput.value = '';

            const handled = await handleSmartCommands(message);
            if (handled) return;

            if (message.toLowerCase().includes('—Ç–∞–Ω—Ü—é–π') || message.toLowerCase().includes('dance')) {
                displayMessage('–î–∏–≤–∏—Å—å, —è–∫ —è –≤–º—ñ—é! –ì–∞–≤-–≥–∞–≤!', false);
                setTimeout(showVideoOverlay, 500);
                return;
            }

            const apiUrl = 'https://backend.buildpicoapps.com/aero/run/llm-api?pk=v1-Z0FBQUFBQm5HUEtMSjJkakVjcF9IQ0M0VFhRQ0FmSnNDSHNYTlJSblE0UXo1Q3RBcjFPcl9YYy1OZUhteDZWekxHdWRLM1M1alNZTkJMWEhNOWd4S1NPSDBTWC12M0U2UGc9PQ==';
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ prompt: `${SMARTY_PROMPT}\n–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: ${message}\n–°–º–∞—Ä—Ç–∏–∫:` })
                });
                const data = await response.json();
                if (data.status === 'success') displayMessage(data.text, false);
            } catch (e) {
                displayMessage('–û–π, —â–æ—Å—å –ª–∞–ø–∫–∏ –∑–∞–ø–ª—É—Ç–∞–ª–∏—Å—è... –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!', false);
            }
        });

        function showVideoOverlay() {
            const overlay = document.getElementById('video-overlay');
            const videoElem = document.getElementById('dance-video');
            const timerElem = document.getElementById('video-timer');
            
            overlay.style.display = 'block';
            setTimeout(() => overlay.style.opacity = '1', 10);
            
            videoElem.currentTime = 0;
            videoElem.play();

            let seconds = 0;
            videoInterval = setInterval(() => {
                seconds++;
                timerElem.textContent = seconds;
            }, 1000);

            document.getElementById('close-video').onclick = () => {
                clearInterval(videoInterval);
                overlay.style.opacity = '0';
                setTimeout(() => { overlay.style.display = 'none'; videoElem.pause(); }, 500);
            };
        }

        chatInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') sendButton.click(); });
    </script>
</body>
</html>
